// TILE

var TILEpalette = 
  {x: '#580758'
  ,1: '#520052'
  ,2: '#560056'
  ,3: '#404040'
  ,4: '#78630A'
}

var TILETemplates = []
TILETemplates.push(
['xxxxxx1xxxxxxxxxxxxxxxxxxxxxxx'
,'xxxxxxx1111xxxxxxxxxxxxxxxxxxx'
,'xxxxxxxxxxx11xxxxxxxxxxxxxxxxx'
,'xxxxxxxxxxxxx1xxxxxxxxxxxxxxxx'
,'xxxxxxxxxxxxxx11111xxxxxxxxxxx'
,'xxxxxxxxxxxxxxxxxxx1xxxxxxxxxx'
,'xxxxxxxxxxxxxxxxxxx1xxxxxxxxxx'
,'xxxxxxxxxxxxxxxxxxx1xxxxxxxxxx'
,'xxxxxxxxxxxxxxxxxxx1xxxxxxxxxx'
,'xxxxxxxx1xxxxxxxxxx11xxxxxxxxx'
,'xxxxxxx121xx11xxxxxx1xxxxxxxxx'
,'xxx11112x211221xxxxx1xxxxxxxxx'
,'xx12222xxx22xx2111xx1xxxxxxxxx'
,'x12xxxxxxxxxxxx2221x1xxxxxxxxx'
,'12xxxxxxxxxxxxxxxx21xxxxxx1111'
,'211xxxxxxxxxxxxxxxx2111xx12222'
,'x221xxx1xxxxxxxxxxxx2221122xxx'
,'xxx211121xxxxxxxxxxxxxx222111x'
,'xxxx222x2111xxxxxxxxxxxxxx2221'
,'xxxxxxxxx22211xxxxxxxxxx111122'
,'xxxxxxxxxxxx221xxxxxx1x12222xx'
,'xxxxxxxxxxxxx12111x11212xxxxxx'
,'xxxxxxxxxxxx1xx222122x2xxxxxxx'
,'xxxxxxxxxxx1xxxxxx2xxxxxxxxxxx'
,'xxxxxxxxx11xxxxxxxxxxxxxxxxxxx'
,'xxxxxxxxx1xxxxxxxxxxxxxxxxxxxx'
,'xxxxxxx111xxxxxxxxxxxxxxxxxxxx'
,'xxxxxxx1xxxxxxxxxxxxxxxxxxxxxx'
,'xxxxxxx1xxxxxxxxxxxxxxxxxxxxxx'
,'xxxxxxx1xxxxxxxxxxxxxxxxxxxxxx'
])
TILETemplates.push(
['xxxxxxx1xxxxxxxxxxxxxxx11xxxxx'
,'xxxxxxx1xxxxxxxxxxxxxxx1xxxxxx'
,'xxxxxxx1xxxxxxxxxxxxx111xxxxxx'
,'xxxx1111xxxxxxxxxxxxx1xxxxxxxx'
,'xxxx1xxxxxxx1111xx1xx1xxxxxxxx'
,'xxxx1xxxxxx1222211211xxxxxxxxx'
,'xxxx1xxxxx12xxxx22x21xxxxxxxxx'
,'xxxx1xxxx12xxxxxxxxx21xxxxxxxx'
,'xxxx1xxx12xxxxxxxxxxx2xxxxxxxx'
,'xxxx11112xxxxxxxxxxxx2xxxxxxxx'
,'xxxx1222xxxxxxxxxxxxx21xxxxxxx'
,'xxx12xxxxxxxxxxxxxxxx221xxxxxx'
,'xx12xxxxxxxxxxxxxxxxxxx21xxxxx'
,'x12xxxxxxxxxxxxxxxxxxxx22111xx'
,'12xxxxxxxxxxxxxxxxxxxxxxx22211'
,'2xxxxxxxxxxxxxxxxxxxxxxx111122'
,'2111xxxxxxxxxxxxxxxxxx112222xx'
,'x22211xxxxxxxxxxxxxxx122xxxxxx'
,'xxxx221xxxxxxxxxxxxx12xxx11111'
,'xxxxxx2xxxxxxxxxxxx1221x122222'
,'xxxxxx2xxxxxxxxxxx12xx212xxxxx'
,'xxxxxx211xxxxxxxx12xxxx2xxxxxx'
,'xxxxxx222xxxxxxx12xxxxxxxxxxxx'
,'xxxxxxxx2xxxxx112111111xxxxxxx'
,'xxxxxxxx2xxxx122xxxxxxx11xxxxx'
,'xxxxx111211x12xxxxxxxxxxx1xxxx'
,'xxxx11xx22212xxxxxxxxxxx1xxxxx'
,'xxxxx1xxxxx2xxxxxxxxxxxx1xxxxx'
,'xxxxxx1xxxxxxxxxxxxxxxxx1xxxxx'
,'xxxxxxx1xxxxxxxxxxxxxxxx1xxxxx'
])
TILETemplates.push(
['xxxxxxx1xxxxxxxxxxxxxxx11xxxxx'
,'xxxxxxx1xxxxxxxxxxxxxxx1xxxxxx'
,'xxxxxxx1xxxxxxxxxxxxx111xxxxxx'
,'xxxx1111xxxxxxxxxxxxx1xxxxxxxx'
,'xxxx1xxxxxxx1111xx1xx1xxxxxxxx'
,'xxxx1xxxxxx1222211211xxxxxxxxx'
,'xxxx1xxxxx12xxxx22x21xxxxxxxxx'
,'xxxx1xxxx12xxxxxxxxx21xxxxxxxx'
,'xxxx1xxx12xxxxxxxxxxx2xxxxxxxx'
,'xxxx11112xxxxxxxxxxxx2xxxxxxxx'
,'xxxx1222x1xxx11xx1xxx21xxxxxxx'
,'xxx12xxxxx111xx11xxxx221xxxxxx'
,'xx12xxxxxx11xxx1xxxxxxx21xxxxx'
,'x12xxxxxx1xx1x1xx1xxxxx22111xx'
,'12xxxxxx1xxxx1xxxx1xxxxxx22211'
,'2xxxxxxxx1xx1x1xxx1xxxxx111122'
,'2111xx111111111111111x112222xx'
,'x22211xxxx11xxxx1xxxx122xxxxxx'
,'xxxx221xx1xx1111x1xx12xxx11111'
,'xxxxxx2xxxxxxxxxxxx1221x122222'
,'xxxxxx2xxxxxxxxxxx12xx212xxxxx'
,'xxxxxx211xxxxxxxx12xxxx2xxxxxx'
,'xxxxxx222xxxxxxx12xxxxxxxxxxxx'
,'xxxxxxxx2xxxxx112111111xxxxxxx'
,'xxxxxxxx2xxxx122xxxxxxx11xxxxx'
,'xxxxx111211x12xxxxxxxxxxx1xxxx'
,'xxxx11xx22212xxxxxxxxxxx1xxxxx'
,'xxxxx1xxxxx2xxxxxxxxxxxx1xxxxx'
,'xxxxxx1xxxxxxxxxxxxxxxxx1xxxxx'
,'xxxxxxx1xxxxxxxxxxxxxxxx1xxxxx'
])

TILETemplates.push(
['xxxxxx12xxxxxxxxxxxxxxxx12xxxx'
,'xxxxxx12xxxxxxxxxxxxxxxx12xxxx'
,'xxxxxx12xxxxxxxxxxxxxxxx12xxxx'
,'xxxxxx12xxxxxxxxxxxxxxx12xxxxx'
,'xxxxxx122xxxxxxxxxxxxx12xxxxxx'
,'xxxxxxx12xxxxxxxxxxxx12xxxxxxx'
,'xxxxxxx12xxxxxxxxxxx12xxxxxxxx'
,'xxxxxxx12xxxxxxxxx122xxxxxxxxx'
,'xxxxxxx122xxxxxxx12xxxxxxxxxxx'
,'xxxxxxxx12xxxxxx12xxxxxxxxxxxx'
,'xxxxxxxx12xxxxx12xxxxxxxxxxxxx'
,'xxxxxxxx122xxxx12xxxxxxxxxxxxx'
,'xxxxxxxxx12xxxxx12xxxxxxxxxxxx'
,'xxxxxxxxxx122xxxx12xxxxxxxxxxx'
,'111xxxxxxxx12xxxx12xxxxxx11111'
,'xxx1xxxxxxx12xxxx12xxxxx1xxxxx'
,'xxxx1111xxxx12xxx12xxxx1xxxxxx'
,'xxxxxxxx111x12x122xxx11xxxxxxx'
,'xxxxxxxxxxx1x12211111xxxxxxxxx'
,'xxxxxxxxxxxxx122xxxxx1xxxxxxxx'
,'xxxxxxxxxxx122x12xxxxx11xxxxxx'
,'xxxxxxxxxx12xxx12xxxxxxx1xxxxx'
,'xxxxxxxxx12xxxxx122xxxxxx1111x'
,'xxxxxxxx122xxxxxxx12xxxxxxxxx1'
,'xxxxxxx12xxxxxxxxxx12xxxxxxxxx'
,'xxxx1222xxxxxxxxxxxx12xxxxxxxx'
,'xxx122xxxxxxxxxxxxxxx12xxxxxxx'
,'xxx12xxxxxxxxxxxxxxxxx122xxxxx'
,'xxx12xxxxxxxxxxxxxxxxxxx12xxxx'
,'xxx12xxxxxxxxxxxxxxxxxxx12xxxx'
])

TILETemplates.push(
['xxxxxxxxxxxxxxxxxxxxxxxx1xxxxx'
,'xxxxxxxxxxxxxxxxxxxxxx11xxxxxx'
,'xxxxxxxxxxxxxxxxxxxxx1xxxxxxxx'
,'xxxx2xx2xxxxxxxxxxxx1xxxxxxxxx'
,'xxx212212xxxxxxxxxx1xxxxxxxxxx'
,'xx21x11x12xxxxxxxx1xxxxxxxxxxx'
,'xx1xx1xxx12xxxxxx1xxxxxxxxxxxx'
,'xxxxxx1xxx1xxxxxx1xxxxxxxxxxxx'
,'xxxxxxx1xxxxxxxxx2xx2xxxxxxxxx'
,'xxxxxxxx11xxxxxx212212xxxxxxxx'
,'xxxxxxxxxx1xxxx21x11x12xxxxxxx'
,'xxxxxxxxxxx1xx21xxxxxx12xxxxxx'
,'xxxxxxxxxxx1x11xxxxxxxx2211111'
,'xxxxxxxxxxxx1xxxxxxxxxx111xxxx'
,'xxxxxxxxxx11xxxxxxxxxxxxxx1xxx'
,'xxxxxxxxx1xxxxxxx2x2xxxxxx1xxx'
,'xxxxxxxx1xxxxxxx21212xxxxx1xxx'
,'xxxxxxx1xxxxxxx21x1x12xxxx1xxx'
,'xxxx2x22xxxxxxx1xxxxx1xxxx1xxx'
,'xxx212112xxxxxxxxxxxxx2xxx1xxx'
,'xx21x1xx12xxxxxxxxxxxx1xxx1xxx'
,'x21xxxxxx12xxxxxxxxxxxxxxxx1xx'
,'x1xxxxxxxx1xxxxxxxxx2xxxxxxx1x'
,'xxxxxxxxxxxxxxxxxxx212x2xxxx1x'
,'xxxxxxxxxxxxxxxxxx21x1212xxx1x'
,'xxxxxxxxxxxxxxxxx21xxx1x12xx1x'
,'xxxxxxxxxxxxxxxx21xxxxxxx1xxx1'
,'xxxxxxxxxxxxxxxx1xxxxxxxxxxxxx'
,'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
,'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
])

var TILERowVersionBuilder = function(row, y) {
  var res = ''
  var rowLen = row.length
  var modLastRow = false
  var cells = row.split('').map(function(c, x) {
    if ((c === 'x') && changeCondition(x, rowLen) || modLastRow) {
      res += ['3','4'][randomMinMax(0,1)]
      modLastRow = !modLastRow
    } else {
      res += c
    }
    return res
  })
  return res
}

var changeCondition = function(x, rowLen) {
  return Math.random() > 0.996
}
var TILESpritesSet = buildIdleTileVersions(TILETemplates, TILEpalette, TILERowVersionBuilder)

var changeCondition = function(x, rowLen) {
  return (x > rowLen-3) && (Math.random() > 0.8)
}
var TILESpritesSetHallL = buildIdleTileVersions(TILETemplates, TILEpalette, TILERowVersionBuilder)

var changeCondition = function(x, rowLen) {
  return (x < 2) && (Math.random() > 0.8)
}
var TILESpritesSetHallR = buildIdleTileVersions(TILETemplates, TILEpalette, TILERowVersionBuilder)

var changeCondition = function(x, rowLen) {
  return ((x < 2) || (x > rowLen-3)) && (Math.random() > 0.8)
}
var TILESpritesSetHallRL = buildIdleTileVersions(TILETemplates, TILEpalette, TILERowVersionBuilder)